<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle} ?: '博客详情'">博客详情</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<!-- 引用导航栏 -->
<div th:replace="~{fragments/common :: header}"></div>

<!-- 主内容区 -->
<main class="main-content">
    <!-- 博客存在时的详情 -->
    <div th:if="${blog != null}" class="detail-container">
        <h1 class="detail-title" th:text="${blog.title}">博客标题</h1>
        <div class="detail-meta" th:text="|发表于: ${#temporals.format(blog.createdAt, 'yyyy年MM月dd日 HH:mm')}|">
        </div>
        <div class="detail-content" th:utext="${htmlContent}">
        </div>
        <a href="/" class="btn-secondary" style="margin-left: 0; margin-top: 2rem; display: inline-block;">← 返回首页</a>
    </div>

    <!-- 博客不存在时的404 -->
    <div th:if="${blog == null}" class="error-container">
        <h1 style="font-size: 48px; color: #999; margin-bottom: 20px;">404</h1>
        <p style="font-size: 18px; color: #666;">找不到要查看的博客...</p>
        <a href="/" class="btn-primary" style="margin-top: 20px; display: inline-block;">返回首页</a>
    </div>
</main>
<!-- 留言区域 -->
<div class="comments-section" style="margin-top: 3rem;">
    <h2>留言板</h2>

    <!-- 留言列表 -->
    <div class="comments-list">
        <div th:each="comment : ${comments}" class="comment-item" style="background: #f8f9fa; padding: 1rem; margin-bottom: 1rem; border-radius: 5px;">
            <div style="display: flex; justify-content: space-between;">
                <strong th:text="${comment.nickname}">昵称</strong>
                <small th:text="${#temporals.format(comment.createdAt, 'yyyy-MM-dd HH:mm')}">时间</small>
            </div>
            <p th:text="${comment.content}" style="margin-top: 0.5rem;"></p>
        </div>

        <div th:if="${comments.isEmpty()}" style="text-align: center; padding: 2rem; color: #666;">
            <p>还没有留言...</p>
        </div>
    </div>

    <!-- 发表留言表单 -->
    <div class="comment-form" style="margin-top: 2rem; background: white; padding: 1.5rem; border-radius: 5px;">
        <h3>发表留言</h3>
        <form th:action="@{/blog/{id}/comment(id=${blog.id})}" method="post">
            <div class="form-group">
                <label for="nickname">昵称</label>
                <input type="text" id="nickname" name="nickname" required style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div class="form-group">
                <label for="content">留言内容</label>
                <textarea id="content" name="content" rows="3" required style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 5px;"></textarea>
            </div>
            <button type="submit" class="btn-primary">发表留言</button>
        </form>
    </div>
</div>
<!-- 引用页脚 -->
<div th:replace="~{fragments/common :: footer}"></div>
</body>
</html>